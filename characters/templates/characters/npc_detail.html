{% extends 'characters/character_layout.html' %}

{% block title %}
    {% if npc.pk %}
        {{ npc.name }} 
    {% else %}
        NPCs 
    {% endif %}
    | {{ block.super }}
{% endblock %}

{% block character_list_title %}NPC List{% endblock %}

{% block character_list %}
    {% if npcs %}
        {% for n in npcs %}
            <li>
                <a {% if n == npc %}class="font-weight-bold" {% endif %}href="{% url 'characters:npc_detail' npc_pk=n.id %}">
                    {{ n.name }}
                </a>
            </li>
        {% endfor %}
    {% else %}
        <li>You haven't created any NPCs yet!</li>
    {% endif %}
{% endblock %}

{% block character_contents_extra %}
    <a href="{% url 'characters:npc_create' %}" class="dropdown-item text-success"><i class="fal fa-fw fa-plus" aria-hidden="true"></i> Create NPC</a>
    <a href="{% url 'characters:npc_export' %}" class="dropdown-item"><i class="fal fa-fw fa-cloud-download" aria-hidden="true"></i> Export NPCs</a>
    <a href="{% url 'characters:npc_import' %}" class="dropdown-item"><i class="fal fa-fw fa-cloud-upload" aria-hidden="true"></i> Import NPCs</a>
    <a href="{% url 'characters:npc_srd' %}" class="dropdown-item"><i class="fal fa-fw fa-book" aria-hidden="true"></i> SRD NPCs</a>
    <a href="{% url 'characters:npcs_delete' %}" class="dropdown-item text-danger"><i class="fal fa-fw fa-trash-alt" aria-hidden="true"></i> Delete NPCs</a>
{% endblock %}

{% block character_detail_title %}
    {% if npc %}
        {{ npc.name }}
    {% else %}
        NPCs
    {% endif %}
{% endblock %}

{% block character_detail_extra %}
    {% if npc %}
        <a href="{% url 'characters:npc_update' npc_pk=npc.pk %}" class="dropdown-item"><i class="fal fa-fw fa-edit" aria-hidden="true"></i> Edit NPC</a>
        {% if npc.is_published == True %}
            <a href="{% url 'tavern:tavern_character_detail' type='npc' pk=npc.pk %}" class="dropdown-item"><i class="mr-1 fal fa-fw fa-cloud-upload" aria-hidden="true"></i> View on The Tavern</a>
        {% else %}
            <a href="{% url 'characters:character_publish' type='npc' pk=npc.pk %}" class="dropdown-item"><i class="mr-1 fal fa-fw fa-cloud-upload" aria-hidden="true"></i> Publish NPC</a>
        {% endif %}
        <a href="{% url 'characters:npc_copy' npc_pk=npc.pk %}" class="dropdown-item"><i class="fal fa-fw fa-copy" aria-hidden="true"></i> Copy NPC</a>
        <a id="npc-delete" href="{% url 'characters:npc_delete' npc_pk=npc.pk %}" class="dropdown-item text-danger"><i class="fal fa-fw fa-trash-alt" aria-hidden="true"></i> Delete NPC</a>
    {% else %}
        <a href="{% url 'characters:npc_create' %}" class="dropdown-item text-success"><i class="fal fa-fw fa-plus" aria-hidden="true"></i> Create NPC</a>
    {% endif %}
{% endblock %}

{% block character_detail %}
    {% if npc %}
        <div class="row">
            <div class="col-md-12">
                <p>{% if npc.get_size_display %} {{ npc.get_size_display }}{% endif %}{% if npc.creature_type %} {{ npc.creature_type }}{% endif %}{% if npc.get_alignment_display %}, {{ npc.get_alignment_display }}{% endif %}</p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                {% if npc.challenge_rating %}<p><span class="font-weight-bold">Challenge Rating</span> {{ npc.challenge_rating }}</p>{% endif %}
                {% if npc.armor_class %}<p><span class="font-weight-bold">Armor Class</span> {{ npc.armor_class }}</p>{% endif %}
                {% if npc.hit_points %}<p><span class="font-weight-bold">Hit Points</span> {{ npc.hit_points }}</p>{% endif %}
                {% if npc.speed %}<p><span class="font-weight-bold">Speed</span> {{ npc.speed }}</p>{% endif %}
            </div>
        </div>

        {% if npc.challenge_rating or npc.armor_class or npc.hit_points or npc.speed %}<hr>{% endif %}

        <div class="row">
            <div class="col-md-2">
                <div class="character-label">
                    <p>STR</p>
                </div>
                <div class="character-details">
                    <p>{{ npc.strength }} ({{ npc.strength_mod }})</p>
                </div>
            </div>
            <div class="col-md-2">
                <div class="character-label">
                    <p>DEX</p>
                </div>
                <div class="character-details">
                    <p>{{ npc.dexterity }} ({{ npc.dexterity_mod }})</p>
                </div>
            </div>
            <div class="col-md-2">
                <div class="character-label">
                    <p>CON</p>
                </div>
                <div class="character-details">
                    <p>{{ npc.constitution }} ({{ npc.constitution_mod }})</p>
                </div>
            </div>
            <div class="col-md-2">
                <div class="character-label">
                    <p>INT</p>
                </div>
                <div class="character-details">
                    <p>{{ npc.intelligence }} ({{ npc.intelligence_mod }})</p>
                </div>
            </div>
            <div class="col-md-2">
                <div class="character-label">
                    <p>WIS</p>
                </div>
                <div class="character-details">
                    <p>{{ npc.wisdom }} ({{ npc.wisdom_mod }})</p>
                </div>
            </div>
            <div class="col-md-2">
                <div class="character-label">
                    <p>CHA</p>
                </div>
                <div class="character-details">
                    <p>{{ npc.charisma }} ({{ npc.charisma_mod }})</p>
                </div>
            </div>
        </div>

        {% if npc.race or npc.npc_class or npc.age or npc.height or npc.weight %}<hr>{% endif %}

        <div class="row">
            <div class="col-md-12">
                {% if npc.race %}<p><span class="font-weight-bold">Race</span> {{ npc.race }}</p>{% endif %}
                {% if npc.npc_class %}<p><span class="font-weight-bold">Class</span> {{ npc.npc_class }}</p>{% endif %}
                {% if npc.age %}<p><span class="font-weight-bold">Age</span> {{ npc.age }}</p>{% endif %}
                {% if npc.height %}<p><span class="font-weight-bold">Height</span> {{ npc.height }}</p>{% endif %}
                {% if npc.weight %}<p><span class="font-weight-bold">Weight</span> {{ npc.weight }}</p>{% endif %}
            </div>
        </div>

        {% if npc.race or npc.npc_class or npc.age or npc.height or npc.weight %}<hr>{% endif %}

        <div class="row">
            <div class="col-md-12">
                {% if npc.saving_throws %}<p><span class="font-weight-bold">Saving Throws</span> {{ npc.saving_throws }}</p>{% endif %}
                {% if npc.skills %}<p><span class="font-weight-bold">Skills</span> {{ npc.skills }}</p>{% endif %}
                {% if npc.senses %}<p><span class="font-weight-bold">Senses</span> {{ npc.senses }}</p>{% endif %}
                {% if npc.languages %}<p><span class="font-weight-bold">Languages</span> {{ npc.languages }}</p>{% endif %}
                {% if npc.damage_vulnerabilities %}<p><span class="font-weight-bold">Damage Vulnerabilities</span> {{ npc.damage_vulnerabilities }}</p>{% endif %}
                {% if npc.damage_immunities %}<p><span class="font-weight-bold">Damage Immunities</span> {{ npc.damage_immunities }}</p>{% endif %}
                {% if npc.damage_resistances %}<p><span class="font-weight-bold">Damage Resistances</span> {{ npc.damage_resistances }}</p>{% endif %}
                {% if npc.condition_immunities %}<p><span class="font-weight-bold">Condition Immunities</span> {{ npc.condition_immunities }}</p>{% endif %}
            </div>
        </div>

        {% if npc.content %}
            <hr>
            <div class="row">
                <div class="col-md-12">
                    {{ npc.content|safe }}
                </div>
            </div>
        {% endif %}

    {% else %}
        <p>You haven't created any NPCs yet!</p>
    {% endif %}
{% endblock %}

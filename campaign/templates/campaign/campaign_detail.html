{% extends 'layout.html' %}

{% load static from staticfiles %}
{% load campaign_extras %}


{% block title %}{{ campaign.title }} | {{ block.super }}{% endblock %}

{% block body_content %}
    <div class="row">

        <div class="col-lg-2 bg-light full-vh shadow-right">
            <h6 class="d-flex justify-content-between align-items-center">
                <span>Campaigns</span>
                <a class="text-dark" href="#"><i class="fas fa-cog"></i></a>
            </h6>
            <ul class="contents_list">
                {% for c in campaigns %}
                    <li{% if c == campaign %} class="font-weight-bold"{% endif %}>
                        <a href="{% url 'campaign:campaign_detail' campaign_pk=c.pk %}">{{ c }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>

        <div class="col-lg-2 bg-light full-vh shadow-right">
            <h6 class="d-flex justify-content-between align-items-center">
                <span>Contents</span>
                <a class="text-dark" href="#"><i class="fas fa-cog"></i></a>
            </h6>
            <ul class="contents_list">
                {% if chapters %}
                    {% for c in chapters %}
                        <li class="li-content">
                            <a {% if c == chapter and not section %}class="font-weight-bold" {% endif %}href="{% url 'campaign:campaign_detail' campaign_pk=campaign.pk chapter_pk=c.pk %}">
                                {{ c.title }}
                            </a>
                        </li>
                        <ul class="pl-3">
                            {% for s in sections %}
                                {% if s.chapter.pk == c.pk %}
                                    <li class="li-content">
                                        <a {% if s == section %}class="font-weight-bold" {% endif %}href="{% url 'campaign:campaign_detail' campaign_pk=campaign.pk chapter_pk=c.pk section_pk=s.pk %}">
                                            {{ s.title }}
                                        </a>
                                    </li>
                                {% endif %}
                            {% endfor %}
                        </ul>
                    {% endfor %}
                {% else %}
                    <li>No chapters</li>
                {% endif %}
            </ul>
            <h6 class="d-flex justify-content-between align-items-center mt-5">
                <span>Party</span>
                <a class="text-dark" href="#"><i class="fas fa-cog"></i></a>
            </h6>
            {% include "posts/party_feed.html" with posts=posts%}
        </div>

        <div class="col-lg-6 bg-white full-vh shadow-right">
            {% if chapter %}
                {% if not section %}
                    <h4>{{ chapter.title }}</h4>
                    {{ chapter.content|safe }}
                {% elif section %}
                    <h4>{{ section.title }}</h4>
                    {{ section.content|safe }}
                {% endif %}
            {% else %}
                <h4>{{ campaign.title }}</h4>
                <p>No content</p>
            {% endif %}
        </div>

        <div class="col-lg-2 bg-light full-vh">
            <h6 class="d-flex justify-content-between align-items-center">
                <span>Tags</span>
                <a class="text-dark" href="#"><i class="fas fa-cog"></i></a>
            </h6>
        </div>

    </div>
{% endblock %}

{% block body_extra %}
    <script src="{% static 'js/campaign_delete.js' %}"></script>
{% endblock %}

{% extends 'layout.html' %}

{% load static from staticfiles %}
{% load campaign_extras %}


{% block title %}{{ campaign.title }} | {{ block.super }}{% endblock %}

{% block body_content %}
    <div class="row">

        <div class="col-md-4 col-lg-2 order-1 bg-light full-vh col-shadow">
            <h6 class="d-flex justify-content-between align-items-center">
                <span>Campaigns</span>
                <a href="" id="campaigns-tools-dropdown" class="text-dark"><i class="fas fa-cog"></i></a>
            </h6>

            <div id="campaigns-tools">
                    <input type="text" class="form-control form-control-sm" placeholder="Search for campaigns">
                <p>
                    <a href="" class="text-success"><i class="fas fa-fw fa-lg fa-plus-circle"></i><span>Create campaign</span></a>
                </p>
            </div>

            <ul class="contents_list">
                {% for c in campaigns %}
                    <li{% if c == campaign %} class="font-weight-bold"{% endif %}>
                        <a href="{% url 'campaign:campaign_detail' campaign_pk=c.pk %}">{{ c }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>

        <div class="col-md-4 col-lg-2 order-2 bg-light full-vh col-shadow">
            <h6 class="d-flex justify-content-between align-items-center">
                <span>Contents</span>
                <a href="" id="campaign-tools-dropdown" class="text-dark"><i class="fas fa-cog"></i></a>
            </h6>

            <div id="campaign-tools">
                <p>
                    <input type="text" class="form-control form-control-sm" placeholder="Search in contents">
                </p>
                <p>
                    <a href="" class="text-success"><i class="fas fa-fw fa-lg fa-plus-circle"></i><span>Create campaign</span></a>
                </p>
                <p>
                    <a href="" class="text-teal"><i class="fas fa-fw fa-lg fa-pen-square"></i><span>Edit campaign</span></a>
                </p>
                <p>
                    <a href="" class="text-purple"><i class="fas fa-fw fa-lg fa-cloud-upload"></i><span>Publish campaign</span></a>
                </p>
                <p>
                    <a href="" class="text-orange"><i class="fas fa-fw fa-lg fa-save"></i><span>Print campaign</span></a>
                </p>
                <p>
                    <a href="" class="text-danger"><i class="fas fa-fw fa-lg fa-trash-alt"></i><span>Delete campaign</span></a>
                </p>
            </div>

            <ul class="contents_list">
                {% if chapters %}
                    {% for c in chapters %}
                        <li>
                            <a {% if c == chapter and not section %}class="font-weight-bold" {% endif %}href="{% url 'campaign:campaign_detail' campaign_pk=campaign.pk chapter_pk=c.pk %}">
                                {{ c.title }}
                            </a>
                        </li>
                        <ul class="pl-3">
                            {% for s in sections %}
                                {% if s.chapter.pk == c.pk %}
                                    <li>
                                        <a {% if s == section %}class="font-weight-bold" {% endif %}href="{% url 'campaign:campaign_detail' campaign_pk=campaign.pk chapter_pk=c.pk section_pk=s.pk %}">
                                            {{ s.title }}
                                        </a>
                                    </li>
                                {% endif %}
                            {% endfor %}
                        </ul>
                    {% endfor %}
                {% else %}
                    <li>No chapters</li>
                {% endif %}
            </ul>
            <hr>
            <h6 class="d-flex justify-content-between align-items-center">
                <span>Party</span>
                <a href="" id="party-tools-dropdown" class="text-dark"><i class="fas fa-cog"></i></a>
            </h6>

            <div id="party-tools">
                <p>
                    <input type="text" class="form-control form-control-sm" placeholder="Search for posts">
                </p>
                <p>
                    <a href="" class="text-pink"><i class="fas fa-fw fa-lg fa-swords"></i><span>View party</span></a>
                </p>
                <p>
                    <a href="" class="text-teal"><i class="fas fa-fw fa-lg fa-comment"></i><span>New post</span></a>
                </p>
                <p>
                    <a href="" class="text-success"><i class="fas fa-fw fa-lg fa-plus-circle"></i><span>Invite players</span></a>
                </p>
            </div>

            {% include "posts/party_feed.html" with posts=posts%}
        </div>

        <div class="col-md-12 col-lg-6 order-lg-3 order-4 bg-white full-vh notes-shadow">
            {% if chapter %}
                {% if not section %}
                    <h4>{{ chapter.title }}</h4>
                    {{ chapter.content|safe }}
                {% elif section %}
                    <h4>{{ section.title }}</h4>
                    {{ section.content|safe }}
                {% endif %}
            {% else %}
                <h4>{{ campaign.title }}</h4>
                <p>No content</p>
            {% endif %}
        </div>

        <div class="col-md-4 col-lg-2 order-lg-4 order-3 bg-light full-vh">
            <h6 class="d-flex justify-content-between align-items-center">
                <span>Tags</span>
                <a href="" id="tags-tools-dropdown" class="text-dark"><i class="fas fa-cog"></i></a>
            </h6>

            <div id="tags-tools">
                <p>
                    <input type="text" class="form-control form-control-sm" placeholder="Search for tags">
                </p>
                <p>
                    <a href="" class="text-success"><i class="fas fa-fw fa-lg fa-plus-circle"></i><span>Create tags</span></a>
                </p>
                <p>
                    <a href="" class="text-danger"><i class="fas fa-fw fa-lg fa-trash-alt"></i><span>Delete tags</span></a>
                </p>
            </div>

        </div>

    </div>
{% endblock %}

{% block body_extra %}
    <script src="{% static 'js/campaign_delete.js' %}"></script>
    <script src="{% static 'js/tools_dropdown.js' %}"></script>
{% endblock %}

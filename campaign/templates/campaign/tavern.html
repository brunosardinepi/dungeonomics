{% extends 'layout.html' %}

{% load static %}
{% load humanize %}

{% load campaign_extras %}

{% block title %} Tavern | {{ block.super }}{% endblock %}

{% block body_content %}
        <div class="row mt-4 pb-3">
            <div class="col-lg-12 mb-3">
                <div class="card mb-3">
                    <div class="card-body">
                        <h2>The Tavern</h2>
                        <p>Welcome to our collection of community campaigns. Publish your campaigns in the Tavern, and then other users can import the campaign and all of its assets into their account. Let others know which content is good by giving reviews and leaving comments on campaigns.</p>
                        <p>Everything in the Tavern is free and always will be free. Build a campaign and share it with others to create quality content that everyone can use.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="row pb-3">
            <div class="col-lg-6 mb-3">
                <div class="card">
                    <div class="card-header">
                        <span class="font-weight-bold">Most Popular Campaigns</span>
                    </div>
                    {% if popular_campaigns %}
                        <table class="table table-hover mb-0">
                            <tbody>
                                {% for campaign in popular_campaigns %}
                                    <tr>
                                        <td><a href="{% url 'tavern_detail' campaign_pk=campaign.pk %}">{{ campaign.title }}</a></td>
                                        <td class="text-right">{% rating_stars_html_tag campaign.rating as rating %}{{ rating|safe }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    {% else %}
                        <div class="card-body">
                            <p>There aren't any published campaigns yet!</p>
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-lg-6 mb-3">
                <div class="card">
                    <div class="card-header">
                        <span class="font-weight-bold">Most Recent Campaigns</span>
                    </div>
                    {% if recent_campaigns %}
                        <table class="table table-hover mb-0">
                            <tbody>
                                {% for campaign in recent_campaigns %}
                                    <tr>
                                        <td><a href="{% url 'tavern_detail' campaign_pk=campaign.pk %}">{{ campaign.title }}</a></td>
                                        <td class="text-right">{% rating_stars_html_tag campaign.rating as rating %}{{ rating|safe }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    {% else %}
                        <div class="card-body">
                            <p>There aren't any published campaigns yet!</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
{% endblock %}